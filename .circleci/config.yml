version: 2
jobs:
  build-7.1:
    docker:
      - image: circleci/php:7.1-cli
    working_directory: ~/repo
    steps:
      - checkout
      - run:
          name: "Build"
          command: |
            phpize
            ./configure --enable-scoutapm
            make
      - run:
          name: "Run tests"
          command: |
            make test
  build-7.2:
    docker:
      - image: circleci/php:7.2-cli
    working_directory: ~/repo
    steps:
      - checkout
      - run:
          name: "Build"
          command: |
            phpize
            ./configure --enable-scoutapm
            make
      - run:
          name: "Run tests"
          command: |
            make test
  build-7.3:
    docker:
      - image: circleci/php:7.3-cli
    working_directory: ~/repo
    steps:
      - checkout
      - run:
          name: "Build"
          command: |
            phpize
            ./configure --enable-scoutapm
            make
      - run:
          name: "Run tests"
          command: |
            make test
